<!DOCTYPE html>
<html lang="ru">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Система технической поддержки</title>
      {% load static %}
      <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
      <link rel="stylesheet" href="{% static 'css/role.css' %}">
  </head>
  <body>
      <div class="figma-page">
          <div class="figma-header">
              <h1 class="figma-title">СИСТЕМА ТЕХНИЧЕСКОЙ ПОДДЕРЖКИ</h1>
          </div>
          <div class="figma-content">
              <div class="user-info-section">
                  <div class="role-label">Ваша роль: <strong>{{ user.get_role_display }}</strong></div>
                  <div class="username-label">Вы зашли как: <strong>{{ user.username }}</strong></div>
              </div>
              <a href="{% url 'notifications' %}" class="btn-create-ticket">Уведомления</a>
              <div class="options-description">
                  {% if user.role == 'respondent' %}
                      Вы можете предоставлять данные в Систему через один из трёх каналов: API, онлайн-форма или оффлайн-файл.
                  {% elif user.role == 'provider' %}
                      Вы интегрируете свой интерфейс с API Системы и обеспечиваете доставку данных от респондентов.
                  {% elif user.role == 'admin' %}
                      Вы управляете сроками, мониторингом и уведомлениями респондентов.
                  {% elif user.role == 'support' %}
                      Вы обрабатываете заявки пользователей и эскалируете сложные вопросы.
                  {% endif %}
              </div>
              <div class="buttons-container">
                  {% if user.role == 'respondent' %}
                    <div class="main-actions">
                        <a href="{% url 'submit_data' %}" class="action-btn">Отправить данные</a>
                        <a href="{% url 'ticket_create' %}" class="action-btn">Сообщить о проблеме</a>
                        <a href="{% url 'upload_offline' %}" class="action-btn">Загрузить файл (оффлайн)</a>
                    </div>
                  {% elif user.role in 'provider,admin' %}
                    <a href="{% url 'ticket_create' %}" class="btn-create-ticket">Создать заявку</a>
                  {% endif %}

                  {% if user.role == 'support' %}
                      <a href="{% url 'ticket_list' %}" class="btn-create-ticket">Мои заявки (L{{ user.support_level }})</a>
                  {% endif %}

                  {% if user.role == 'admin' %}
                      <a href="{% url 'admin_data' %}" class="btn-admin-panel">Админ-панель данных</a>
                  {% endif %}

                  {% if user.is_staff %}
                      <a href="/admin/" class="btn-admin-panel">Django Admin</a>
                  {% endif %}
                  <form method="post" action="{% url 'logout' %}" style="display: inline;">
                      {% csrf_token %}
                      <button type="submit" class="btn-logout">ВЫХОД</button>
                  </form>
              </div>
          </div>
      </div>
      <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
  </body>
</html>